# Redirección automática al subdirectorio /public
# Este archivo debe estar en la raíz del proyecto 

RewriteEngine On

# Si acceden directamente sin ruta adicional, redirigir a /public/
RewriteCond %{REQUEST_URI} ^/?$
RewriteRule ^(.*)$ /public/ [R=301,L]

# Redirigir todas las peticiones que no sean a /public hacia /public
# Evitar bucles infinitos verificando que no sea ya una ruta a /public
RewriteCond %{REQUEST_URI} !^/public/
RewriteCond %{REQUEST_URI} ^/(.+)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /public/%1 [R=301,L]
